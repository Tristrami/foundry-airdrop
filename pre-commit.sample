#!/bin/bash

# å®Œæ•´çš„ pre-commit hook
echo "ğŸ”§ Running pre-commit checks..."

# ç§»é™¤ lib ç›®å½•çš„ç¼“å­˜
if [ -d "lib" ]; then
    if git ls-files --cached lib/ | grep -q .; then
        git rm -r --cached lib/ > /dev/null 2>&1
        echo "âœ“ Removed lib/ from git cache"
        
        # é‡æ–°æ·»åŠ  .gitignore ä»¥ç¡®ä¿é…ç½®æ­£ç¡®
        if [ -f ".gitignore" ]; then
            git add .gitignore
        fi
    else
        echo "â„¹ lib/ already not in cache"
    fi
fi

# å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»– pre-commit æ£€æŸ¥
# ä¾‹å¦‚: npm test, linting, etc.

echo "âœ… Pre-commit checks completed"
exit 0